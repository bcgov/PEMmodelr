---
title: "04_build_map"
author: "G. Perkins"
date: "2023-03-23"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

```{r  libraries}
#remotes::install_github("bcgov/PEMprepr", build_vignettes = TRUE)
devtools::load_all("D:\\PEM_DATA\\PEMprepr")
devtools::load_all("D:\\PEM_DATA\\PEMsamplr")
devtools::load_all("D:\\PEM_DATA\\PEMmodelr")

library(PEMprepr)
library(PEMsamplr)
library(PEMmodelr)
library(dplyr)
library(data.table)
library(tidymodels)

fid <- setup_folders("CanyonCreek")

```


```{r cars}
# set up the standard inputs 

cov_dir <- file.path(fid$cov_dir_1020[2], "5m")
rtemplate <- terra::rast(file.path(cov_dir, "template.tif"))
  

model_dir <- fid$model_final[2]
bgc_list <- list.files(model_dir)

# loop for BGC S
bgc <- bgc_list[3]

tile_dir <- file.path(model_dir, bgc, "tiles")
 if(!dir.exists(file.path(tile_dir))){dir.create(file.path(tile_dir))} 


fmodel <- readRDS(file.path(model_dir, bgc,"final_model.rds"))



```
